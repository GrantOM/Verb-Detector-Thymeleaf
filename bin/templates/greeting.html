<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head> 
    <title>Getting Started: Handing Form Submission</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <!-- Homepage Specific Elements -->
    <link rel="stylesheet" href="styles/layout.css" type="text/css" />
	<script type="text/javascript" src="scripts/jquery-1.4.1.min.js"></script>
	<script type="text/javascript" src="scripts/jquery-ui-1.7.2.custom.min.js"></script>
	<script type="text/javascript" src="scripts/list-control.js"></script>
    <!-- <script type="application/javascript" src="scripts/pie_chart.js"></script>  -->
    <!--<script type="text/javascript" src="scripts/d3.min.js"></script>      -->
    <!--<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>   -->
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.4.6"></script>
    <script src='http://mbostock.github.com/d3/d3.layout.js?2.4.6' type='text/javascript'></script>
    <!-- End Homepage Specific Elements -->
</head>
<body>
	<div id="header">
		<h1>Bloom's Taxonomy Verb Detection</h1>
	</div>
   	<div class="colmask threecol">
		<div class="colmid">
			<div class="colleft">
				<div class="col1">
                    <!-- Column 1 start -->
                    <script>
                        function content_view_click(content, graph) {
                            document.getElementById(content).style.display = 'block';
                            document.getElementById(graph).style.display = 'none';
                        }

                        function graph_view_click(content, graph) {
                            document.getElementById(content).style.display = 'none';
                            document.getElementById(graph).style.display = 'block';
                        }

                    </script>
                    <button id="content-view" onclick="content_view_click('content', 'graphs')">Content</button>
                    <button id="graph-view" onclick="graph_view_click('content', 'graphs')">Graphs</button>
                    <div id = "content">
                        <p th:text="'Document name: ' + ${greeting.id}" />
                        <p th:text="${greeting.content}" />
                    </div>
                    <div id = "graphs" class="graphs">
                   		<div id="chart" class="chart"></div>
						<script th:inline="javascript">
						/*<![CDATA[*/
						    var creating = /*[[${greeting.creatingVal}]]*/ '0';
							var evaluating = /*[[${greeting.evaluatingVal}]]*/ '0';
							var analysing = /*[[${greeting.analysingVal}]]*/ '0';
							var applying = /*[[${greeting.applyingVal}]]*/ '0';
							var understanding = /*[[${greeting.understandingVal}]]*/ '0';
							var remembering = /*[[${greeting.rememberingVal}]]*/ '0';
							
	                        var data = [
	                                    {name: "remembering", val: remembering},
	                                    {name: "understanding", val: understanding},
	                                    {name: "analysing", val: analysing},
	                                    {name: "applying", val: applying},
	                                    {name: "evaluating", val: evaluating},
	                                    {name: "creating", val: creating}
	                                ];
	
                            var w = 400,
                            h = 400,
                            r = Math.min(w, h) / 2,
                            labelr = r + 10, // radius for label anchor
                            color = d3.scale.category20(),
                            donut = d3.layout.pie(),
                            arc = d3.svg.arc().innerRadius(r * .5).outerRadius(r);

                    var vis = d3.select("#chart")
                            .append("svg:svg")
                            .data([data])
                            .attr("width", w + 150)
                            .attr("height", h + 300);

                    var arcs = vis.selectAll("g.arc")
                            .data(donut.value(function(d) { return d.val }))
                            .enter().append("svg:g")
                            .attr("class", "arc")
                            .attr("transform", "translate(" + (r + 75) + "," + r + ")");

                    arcs.append("svg:path")
                            .attr("fill", function(d, i) { return color(i); })
                            .attr("d", arc);

                    arcs.append("svg:text")
                            .attr("transform", function(d) {
                                var c = arc.centroid(d),
                                        x = c[0],
                                        y = c[1],
                                // pythagorean theorem for hypotenuse
                                        h = Math.sqrt(x*x + y*y);
                                return "translate(" + (x/h * labelr) +  ',' +
                                        (y/h * labelr) +  ")";
                            })
                            .attr("dy", ".35em")
                            .attr("text-anchor", function(d) {
                                // are we past the center?
                                return (d.endAngle + d.startAngle)/2 > Math.PI ?
                                        "end" : "start";
                            })
                            .text(function(d, i) { return d.value.toFixed(2); });
						/*]]>*/
						</script>
                    </div>
					<!-- Column 1 end -->
				</div>
				<div class="col2">
					<!-- Column 2 start -->
                    <form action="#" th:action="@{/greeting}" th:object="${greeting}" method="post" enctype="multipart/form-data">
                        <p>Name: <input type="text" th:field="*{id}" /></p>
                        File to upload: <input type="file" name="file"/><br />
                        <!--<p>Message: <input type="text" th:field="*{content}" /></p>-->
                        <p><input type="submit" value="Submit" /></p>
                        <a href="/greeting">Upload another file</a>
                    </form>
					<!-- Column 2 end -->
				</div>
				<div class="col3">
					<!-- Column 3 start -->
					<div id="listContainer">
			            <div class="listControl">
			                <a id="expandList">Expand All</a>
			                <a id="collapseList">Collapse All</a>
			            </div>
			            <ul id="expList">
			                <li>
			                    Creating (<span th:text="${greeting.creatingVal} "></span>)
			                    <ul>
			                        <li>
			                           <p th:text="${greeting.creating}" />
			                        </li>
			                    </ul>
			                </li>
			                <li>
			                    Evaluating (<span th:text="${greeting.evaluatingVal} "></span>)
			                    <ul>
			                    	<li>
			                    		<p th:text="${greeting.evaluating}" />
			                    	</li>
			                    </ul>
			                </li>
			                <li>
			                    Analysing (<span th:text="${greeting.analysingVal} "></span>)
			                    <ul>
			                        <li>
			                            <p th:text="${greeting.analysing}" />
			                        </li>
			                    </ul>
			                </li>
			                <li>
			                    Applying (<span th:text="${greeting.applyingVal} "></span>)
			                    <ul>
			                        <li>
			                            <p th:text="${greeting.applying}" />
			                        </li>
			                    </ul>
			                </li>
			                <li>
			                    Understanding (<span th:text="${greeting.understandingVal} "></span>)
			                    <ul>
			                        <li>
			                            <p th:text="${greeting.understanding}" />
			                        </li>
			                    </ul>
			                </li>
			                <li>
			                    Remembering (<span th:text="${greeting.rememberingVal} "></span>)
			                    <ul>
			                        <li>
			                            <p th:text="${greeting.remembering}" />
			                        </li>
			                    </ul>
			                </li>
			            </ul>
			        </div>
					<!-- Column 3 end -->
				</div>
			</div>
		</div>
	</div>
</body>
</html>
